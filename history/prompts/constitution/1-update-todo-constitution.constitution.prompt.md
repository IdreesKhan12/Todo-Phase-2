---
id: 1
title: Update Todo Constitution
stage: constitution
date: 2026-02-05
surface: agent
model: claude-sonnet-4-5-20250929
feature: none
branch: master
user: user
command: /sp.constitution
labels: [constitution, todo-app, security, architecture]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
tests:
---

## Prompt

Project: Todo Full-Stack Web Application (Agentic Dev Stack, Hackathon Phase 2)

Purpose:
Transform an existing console-based todo application into a modern, secure, multi-user full-stack web application using a strictly spec-driven, agentic development workflow with zero manual coding.

Core principles:
- Spec-driven development: All implementation must strictly follow approved specifications
- Agentic execution: Code is generated and modified only via Claude Code and Spec-Kit Plus
- Determinism: Same spec and inputs must produce consistent outputs
- Security-first design: Authentication, authorization, and data isolation are mandatory
- Separation of concerns: Frontend, backend, database, and authentication responsibilities must be clearly isolated
- Reviewability: Every phase (spec, plan, tasks, implementation) must be auditable

Key standards:
- No manual coding: All code changes must be generated by agents
- REST correctness: APIs must follow RESTful conventions and proper HTTP semantics
- Persistent storage: All data must be stored in Neon Serverless PostgreSQL
- Multi-user isolation: Users must only access their own data
- JWT-based auth: All protected endpoints must require valid JWT tokens
- Environment parity: Secrets and configuration must be managed via environment variables
- Type safety: Strong typing across frontend, backend, and database models
- Validation: All inputs and outputs must be validated

Architecture constraints:
- Frontend: Next.js 16+ using App Router
- Backend: Python FastAPI
- ORM: SQLModel
- Database: Neon Serverless PostgreSQL
- Authentication: Better Auth (JWT-based)
- Communication: RESTful JSON APIs
- Authorization header: Authorization: Bearer <JWT>

Security constraints:
- All API routes require authentication after auth integration
- Requests without valid JWT must return 401 Unauthorized
- JWT signature must be verified using shared secret (BETTER_AUTH_SECRET)
- User identity must be derived from JWT, not client input
- Task ownership must be enforced at query level
- Token expiry must be respected

Development constraints:
- Follow Agentic Dev Stack workflow strictly:
  1. Write specification
  2. Generate implementation plan
  3. Break into tasks
  4. Implement via Claude Code
- No skipping or merging of phases
- Each spec must be independently reviewable
- Each plan must map directly to its spec
- Each task must trace back to a plan item

Testing & validation standards:
- API behavior must match documented endpoints
- Unauthorized access must be explicitly rejected
- Authenticated users must only see their own tasks
- CRUD operations must persist correctly in database
- Frontend must correctly reflect backend state
- Error states must be handled gracefully

Success criteria:
- All basic-level todo features implemented as a web app
- Secure multi-user support with JWT authentication
- Fully functional REST API with proper authorization
- Persistent task storage using Neon PostgreSQL
- Responsive frontend integrated with backend APIs
- Zero manual code edits performed
- Spec ‚Üí Plan ‚Üí Tasks ‚Üí Implementation traceability achieved
- Project passes hackathon review for correctness, security, and process discipline

## Response snapshot

I've successfully updated the constitution file for your Todo Full-Stack Web Application project. The constitution file at `.specify/memory/constitution.md` has been updated with:

1. Core principles aligned with spec-driven development, agentic execution, and security-first design
2. Technology stack constraints specifying Next.js, FastAPI, SQLModel, Neon PostgreSQL, and Better Auth
3. Security & authorization requirements for JWT-based authentication and data isolation
4. Development workflow requirements following the Agentic Dev Stack process
5. Governance section establishing compliance requirements

The updated constitution now serves as the foundational document for your todo application project, ensuring all development follows the specified architecture and security requirements.

## Outcome

- ‚úÖ Impact: Project constitution updated to reflect todo app requirements
- üß™ Tests: Manual verification completed
- üìÅ Files: .specify/memory/constitution.md updated
- üîÅ Next prompts: Ready for spec creation phase
- üß† Reflection: Constitution now provides clear guidance for all future development

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL): PASS
- Prompt variant (if applicable): N/A
- Next experiment (smallest change to try): Begin spec creation